# Epoch tester
@test !isweekend(Date(2014, 7, 11))
@test isweekend(Date(2014, 7, 12))
@test isweekend(Date(2014, 7, 13))
@test !isweekend(Date(2014, 7, 14))
@test FinMarkets.easter(2002) == Date(2002, 3, 31)
@test FinMarkets.easter(2014) == Date(2014, 4, 20)
@test FinMarkets.easter(2014, Fri) == Date(2014, 4, 18)
@test FinMarkets.easter(2014, Sat) == Date(2014, 4, 19)
@test FinMarkets.easter(2014, Sun) == Date(2014, 4, 20)
@test FinMarkets.easter(2014, Mon) == Date(2014, 4, 21)
@test FinMarkets.easter(2014, Tue) == Date(2014, 4, 20)
@test FinMarkets.easter(2014, Wed) == Date(2014, 4, 20)
@test FinMarkets.easter(2014, Thu) == Date(2014, 4, 20)
@test FinMarkets.easter(Date(2014, 3, 31)) == FinMarkets.easter(2014)
@test FinMarkets.seasonstart(1991, Mar) - DateTime(1991, 3, 21, 3, 2, 54) <= Millisecond(51 * 1000)
@test FinMarkets.seasonstart(2000, Mar) - DateTime(2000, 3, 20, 7, 36, 19) <= Millisecond(51 * 1000)
@test FinMarkets.seasonstart(1992, Jun) - DateTime(1992, 6, 21, 3, 15, 8) <= Millisecond(39 * 1000)
@test FinMarkets.seasonstart(1995, Sep) - DateTime(1995, 9, 23, 12, 14, 1) <= Millisecond(44 * 1000)
@test FinMarkets.seasonstart(1997, Dec) - DateTime(1997, 12, 21, 20, 8, 5) <= Millisecond(41 * 1000)
@test Date(FinMarkets.seasonstart(1997, Dec)) == FinMarkets.seasonstart(Date(1997, 1, 1), Dec)
@test_throws ErrorException FinMarkets.seasonstart(999, Dec)
@test_throws ErrorException FinMarkets.seasonstart(3001, Dec)
@test_throws ErrorException FinMarkets.seasonstart(1999, Feb)
@test FinMarkets.isnewyearsday(Date(2013, 1, 1))
@test !FinMarkets.isnewyearsday(Date(2014, 1, 2))
@test !FinMarkets.isnewyearsday(Date(2014, 2, 1))
@test FinMarkets.isaustraliaday(Date(2014, 1, 26))
@test !FinMarkets.isaustraliaday(Date(2014, 1, 27))
@test !FinMarkets.isaustraliaday(Date(2014, 2, 26))
@test FinMarkets.isanzacday(Date(2014, 4, 25))
@test !FinMarkets.isanzacday(Date(2014, 4, 26))
@test !FinMarkets.isanzacday(Date(2014, 5, 25))
@test FinMarkets.iseaster(Date(2014, 4, 20))
@test !FinMarkets.iseaster(Date(2014, 4, 21))
@test !FinMarkets.iseaster(Date(2014, 5, 20))
@test FinMarkets.isseasonstart(DateTime(1997, 12, 21, 20, 8, 20, 69), Dec)
@test FinMarkets.isseasonstart(Date(1997, 12, 21), Dec)
@test FinMarkets.ischristmasday(Date(2014, 12, 25))
@test !FinMarkets.ischristmasday(Date(2014, 12, 26))
@test !FinMarkets.ischristmasday(Date(2014, 11, 25))
@test FinMarkets.isboxingday(Date(2014, 12, 26))
@test !FinMarkets.isboxingday(Date(2014, 12, 27))
@test !FinMarkets.isboxingday(Date(2014, 11, 26))

# Holiday testers
@test FinMarkets.isnewyearsholiday(Date(2014, 1, 1), [Sat, Sun])
@test !FinMarkets.isnewyearsholiday(Date(2011, 1, 2), [Sat, Sun])
@test FinMarkets.isnewyearsholiday(Date(2011, 1, 3), [Sat, Sun])
@test FinMarkets.isnewyearsholiday(Date(2011, 1, 3), [Sat])
@test !FinMarkets.isnewyearsholiday(Date(2011, 1, 3))
@test FinMarkets.isnewyearsholiday(Date(2012, 1, 2), [Sat, Sun])
@test FinMarkets.isnewyearsholiday(Date(2012, 1, 2), [Sun])
@test FinMarkets.isaustraliadayholiday(Date(2014, 1, 26), [Sat, Sun])
@test FinMarkets.isaustraliadayholiday(Date(2014, 1, 27), [Sat, Sun])
@test FinMarkets.isaustraliadayholiday(Date(2015, 1, 26), [Sat, Sun])
@test !FinMarkets.isaustraliadayholiday(Date(2015, 1, 27), [Sat, Sun])
@test FinMarkets.isanzacdayholiday(Date(2014, 4, 25), [Sat, Sun])
@test FinMarkets.isanzacdayholiday(Date(2015, 4, 25), [Sat, Sun])
@test FinMarkets.isanzacdayholiday(Date(2015, 4, 27), [Sat, Sun])
@test !FinMarkets.isanzacdayholiday(Date(2015, 4, 27))
@test FinMarkets.iseasterholiday(Date(2014, 4, 18), [Fri, Sat, Sun, Mon])
@test !FinMarkets.iseasterholiday(Date(2014, 4, 18), [Sat, Sun, Mon])
@test FinMarkets.iseasterholiday(Date(2014, 4, 20))
@test !FinMarkets.iseasterholiday(Date(2014, 4, 18))
@test FinMarkets.ischristmasdayholiday(Date(2014, 12, 25))
@test FinMarkets.ischristmasdayholiday(Date(2016, 12, 25), true)
@test !FinMarkets.ischristmasdayholiday(Date(2016, 12, 26), true)
@test !FinMarkets.ischristmasdayholiday(Date(2016, 12, 26))
@test FinMarkets.ischristmasdayholiday(Date(2016, 12, 27), true)
@test FinMarkets.isboxingdayholiday(Date(2014, 12, 26))
@test FinMarkets.isboxingdayholiday(Date(2014, 12, 26), true)
@test FinMarkets.isboxingdayholiday(Date(2015, 12, 26), true)
@test !FinMarkets.isboxingdayholiday(Date(2015, 12, 28))
@test FinMarkets.isboxingdayholiday(Date(2015, 12, 28), true)
@test FinMarkets.isseasonstartholiday(DateTime(1997, 12, 21, 20, 8, 20, 69), Dec,
    [Sat, Sun])
@test FinMarkets.isseasonstartholiday(DateTime(1997, 12, 21), Dec, [Sat, Sun])

# Good day testers
@test !isgoodday(Date(2014, 7, 20), NoFCalendar())
@test isgoodday(Date(2014, 7, 21), NoFCalendar())
@test !isgoodday(Date(2015, 11, 3), +(AUSYFCalendar(), AUMEFCalendar()))
@test isgoodday(Date(2015, 11, 3),
    JointFCalendar([AUSYFCalendar(), AUMEFCalendar()], false))
