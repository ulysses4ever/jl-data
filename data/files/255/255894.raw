#!/usr/bin/julia

using HTTPClient.HTTPC
using ZipFile

workingDrectory="/tmp/"

## function to download any file
function downloadFile(urlString::String)
## supposed to use a randon fileName
	filename = rand()
	outFile = "$workingDrectory$filename"
	ofs = open ("$(outFile)", "w")
	try	
		res = HTTPClient.get("$(urlString)", RequestOptions(ostream=ofs))
		if ( res.http_code != 200 )
			throw (Exception())
		end
	catch err
		println ("downloadFile(): $err")
		outFile = ""
	finally
		close (ofs)
	end

# supposed to return downloaded filename
	return outFile
end

## extract any file
function extractZip(filename::String)
	extractedFilename = ""
	try
		zipData = ZipFile.Reader("$(filename)");
		for f in zipData.files
			extractedFilename = "$workingDrectory$(f.name)"
			ofs = open("$extractedFilename","w")
			write (ofs,readall(f))
			close (ofs)
# assuming that there is only one file
# else we need ot store filenames in a array
		end
		close(zipData)
	catch err
		println ("extractZip: $err")
#		extractedFilename = ""
	end
	return extractedFilename
end
