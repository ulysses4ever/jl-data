
using GoCL
using Base.Test

a = ones(UInt32, 19, 19)
b = zeros(UInt32, 19, 19)
@forall i j begin
    b[i, j] = 2 * a[i, j]
end
@test b == 2a
c = @forall_fold i j (+) 0 b begin
    b[i, j] = 3 * a[i, j]
end
@test c == 3 * 19 * 19

board = Board()
@test length(board.rows) == 19
@test point(board, 1, 1) == empty
@test point(board, 19, 19) == empty
move!(board, black, 10, 10)
@test point(board, 10, 10) == black
move!(board, white, 12, 11)
@test sprint(print, board) == """. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . + . . . . . + . . . . . + . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . O . . . . . . .
. . . + . . . . . X . . . . . + . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . + . . . . . + . . . . . + . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . ."""

p = Position()
move!(p, black, 5, 5)
for (x,y) in ((5,6),(6,6),(6,5),(5,4),(4,5))
    move!(p, white, x, y)
end
@test sprint(print, p) == """. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . + . . . . . + . . . . . + . . .       __          __          __      
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . + . . . . . + . . . . . + . . .       __          __          __      
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . O O . . . . . . . . . . . . .          2 2                          
. . . O . O . . . . . . . . . . . . .        4   2                          
. . . + O . . . . + . . . . . + . . .       __ 3        __          __      
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       
. . . . . . . . . . . . . . . . . . .                                       """
