foamgrid = Package(
  "libdune-foamgrid",
  ModifySource(
    GitSource("https://users.dune-project.org/repositories/projects/dune-foamgrid.git"),
    `rm examples/CMakeLists.txt` |> `touch examples/CMakelists.txt`
  ),
  :CMake,

  email = "rc-softdev@ucl.ac.uk",
  maintainer = "Research Software Development Team",
  license = "lgpl",
  build_depends = [
    "cmake", "gcc (>= 4.0)", "make (>= 3.0)", "g++ (>= 4.0)", "gfortran (>= 4.0)", "cdbs",
    "doxygen", "libdune-common-dev", "libdune-geometry-dev", "libdune-grid-dev",
    "libdune-localfunctions-dev", "libblas-dev", "liblapack-dev", "libgmp-dev"
  ],
  distribution = "trusty",

  package="libdune-foamgrid",
  architecture="any",
  depends=[
    "libdune-common-2.3.1", "libdune-geometry-2.3.1", "libdune-grid-2.3.1", "libblas3",
    "liblapack3", "libgmp10"
  ],
  description=["One and two dimensional simplex grids",
    "  This module provides the grid implementation 'FoamGrid'. FoamGrid implements one- and",
    "  two-dimensional simplex grids, which can be embedded in Euclidean spaces of arbitrary",
    "  dimension. As a special feature, FoamGrid does not require the grids to be manifolds.",
    "  All sorts of T-junctions, singular points and the like are allowed. This makes FoamGrid",
    "  particularly suited to model objects like foams, fracture networks, neuron trees, root",
    "  networks, and others. FoamGrid is a self-contained grid implementation, and does not",
    "  depend on an external library."
  ]
)

prepare(foamgrid, workspace)
build(machine, foamgrid, workspace)
test(machine, foamgrid, workspace) do package
  "test -e /usr/include/dune/foamgrid/foamgrid.hh\n" *
  "test -e /usr/include/dune/foamgrid/dgfoam.cc\n" *
  "test -e /usr/include/dune/foamgrid/dgfoam.cc\n" *
  "test -e /usr/share/dune/cmake/modules/DuneFoamgridMacros.cmake"
end
