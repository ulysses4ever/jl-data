###################################################
## Match tests
###################################################

using LightGraphs
using KidneyMatching.match
using KidneyMatching.Log

g1 = DiGraph(4)
add_edge!(g1, 1,2)
add_edge!(g1, 2,1)
add_edge!(g1, 1,3)
add_edge!(g1, 3,4)
add_edge!(g1, 4,1)
l = Log(1, 1, false)
w1 = [1.0,1.0,1.0,1.0]

m, v = match(g1, w1, l, techno = "2_cycles", solver = "gurobi")
@test m == [1,1,0,0]
@test v == 2

m, v = match(g1, w1, l, techno = "23_cycles", solver = "gurobi")
@test v == 3

add_edge!(g1, 2,3)
m, v = match(g1, w1, l, techno = "23_cycles", solver = "gurobi")
@test v == 3

w2 = [1.0,3.0,1.0,1.0]
m, v = match(g1, w2, l, techno = "23_cycles", solver = "gurobi")
@test m == [1,1,0,0]
@test v == 4

m, v = match(g1, w2, l, techno = "2_cycles", solver = "gurobi")
@test v == 4
