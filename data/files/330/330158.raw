# classify a bunch of emails and sort them apart
testing_path = "$(path)/testing_20_15/"

testing_files = readdir(testing_path)

vocab_file = "$(path)/vocab.txt"

# process each email.
counter_spam = 0
counter_non_spam = 0

path_spam = "$(testing_path)/spam/"
path_non_spam = "$(testing_path)/non-spam/"

for f = 1:size(testing_files, 1)

  file = "$(testing_path)/$(testing_files[f])"

  email_features = process_email("$(testing_path)/$(testing_files[f])", vocab_file, true)
  pred, deci = svmpredict(model, email_features)

  #println("Spam Classification: $(pred == [1.0] ? "spam" : "non-spam")")
  pred == [1.0] ? counter_spam += 1 : counter_non_spam += 1

  new_file = "$(pred == [1.0] ? path_spam : path_non_spam)/$(testing_files[f])"

  mv(file, new_file)

end

println("Spam:\t\t$(counter_spam)[15]\nNon-Spam:\t$(counter_non_spam)[20]")

