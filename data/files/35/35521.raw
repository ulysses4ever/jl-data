using CommLib
using Debug

include("../src/types/TurboParams_t.jl")

@debug function runDbgTC()
(op,ns) = CommLib.convPolyToTrellis([3]',[1 5],[7]');
intlv = reshape([3;4;1;5;2;6;7],7,1);
ibits=[true;false;true;false;true;false;false];
punct = reshape([3:4:28],7,1);
finop = CommLib.turboEnc(ns,op,ibits,intlv,punct);


rxSamples = [2.0 -5 6 1 2 -1 3 -1 2 -2 -2 -2 2 1 -5 -4 -2 5 -5 -1 -6]';
EsNo = 0.25;

@bp
tParams = TurboParams_t(op,ns,intlv,punct);

turboDecode(rxSamples,EsNo,tParams );


end
