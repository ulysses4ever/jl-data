include("config.jl")
include("preallocation.jl")
include("genotype.jl")
include("population.jl")


import Preallocation
import Genotype
import Config
import Population


function generate()

    NUM_GENOTYPES = 200000000

    config_vals::Config.Type_Config_Values = Config.Type_Config_Values()
    population = Population.make_population(config_vals)

    for i = 1:NUM_GENOTYPES

        if i % 10000000 == 0
            println(i)
        end
        
        genotype = Genotype.make_random_genotype(config_vals)
        Genotype.evaluate(genotype, config_vals, 1, population.preallocation)
        f1 = genotype.fitness
        genotype.evaluated = false
        Genotype.evaluate(genotype, config_vals, 2, population.preallocation)
        f2 = genotype.fitness
        max = f1
        if f2 > f1
            max = f2
        end
        if max >= 13.0
            file = open(string("random_genotypes_supporting_info/", string(i)), "w")
            write(file, string(f1), "\n")
            write(file, string(f2), "\n")
            close(file)
            Genotype.write_to_graphml(genotype, config_vals, string("random_genotypes_graphml/", string(i), ".graphml"))
        end
    end
end

generate()
