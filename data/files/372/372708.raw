include("jb2048.jl")
include("dag2048.jl")
# julia set working module

b=[1 1 0; 0 0 0]
goal,restricted=8,8
ifrozen,ifree=[],1:6
@time node=MaxNode(b)

λ,μ=length(maxdag),length(meandag)
exp(log(λ)/6)
println((λ,μ))

g=Game(b);play!(g,display=true)

itarget,ixtarget=[1],1:3
restricted=4
empty!(maxdag);empty!(meandag)
@time node=MaxNode(b)

g=Game(b)
play!(g,moves=1,display=true)
node=MaxNode(g.board)
node.child

i=0
i-=1;h=g.hist[i];plot(h...)
    node=MaxNode(h[1])
i+=1;h=g.hist[i];plot(h...)
    node=MaxNode(h[1])
node.child
jb2048.back!(g,i)
jb2048.force!(g,2)

state=start(maxdag)
begin
    while !done(maxdag,state)
        (key,node),state=next(maxdag,state)
        b=node.board
        maximum(b)==4 && break
    end
    plot(node.board,0,node.height)
    state,node
end
node.child
