function compute_ber(s, r, sprlens::Range; s_header=false, r_header=false)
  nspoints = s_header ? countlines(s)-1 : countlines(s)
  nrpoints = r_header ? countlines(r)-1 : countlines(r)

  if !(nspoints == nrpoints)
    error("Driver and received signal do not have equal lengths.")
  end

  nsprlens = length(sprlens)
  bers = Array(Float64, nsprlens)

  for i = 1:nsprlens
    sprrange = 0:sprlens[i]:nspoints
    nsprseqs = length(sprrange)-1

    sseq = Array(Float64, sprlens[i])
    rseq = Array(Float64, sprlens[i])

    nbiterrors = 0

    sstream = open(s, "r")
    rstream = open(r, "r")

    if s_header; datatitle01 = readline(sstream); end
    if r_header; datatitle02 = readline(rstream); end

    for j = 1:nsprseqs
      for k = 1:sprlens[i]
        sseq[k] = float(readline(sstream))
        rseq[k] = float(readline(rstream))
      end

      if cov(sseq, rseq) < 0
        nbiterrors += 1
      end
    end

    close(sstream)
    close(rstream)

    bers[i] = nbiterrors/nsprseqs

    println("Completed iteration $i of $nsprlens")
  end

  (sprlens, bers)
end

function compute_and_write_ber(s, r, sprlens::Range, out; s_header=false, r_header=false)
  bers = compute_ber(s, r, sprlens; s_header=s_header, r_header=r_header)
  writedlm(out, vcat(bers[1]', bers[2]'), ' ')
end
